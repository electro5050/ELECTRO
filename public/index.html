<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Electro5050</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="author" content="themesflat.com">

    <!-- Mobile Specific Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">

    <!-- Theme Style -->
    <link rel="stylesheet" type="text/css" href="%PUBLIC_URL%/../assets/css/style.css">

    <!-- Favicon and Touch Icons  -->
    <link rel="shortcut icon" href="assets/icon/Favicon.png">
    <link rel="apple-touch-icon-precomposed" href="%PUBLIC_URL%/assets/icon/Favicon.png">
  </head>
  <body class="body">
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
  <script type="text/javascript">
     var Tawk_API = Tawk_API || {}, Tawk_LoadStart = new Date();
    var s1 = document.createElement("script"), s0 = document.getElementsByTagName("script")[0];
    s1.async = true;
    s1.src = 'https://embed.tawk.to/653ff927a84dd54dc486d3b7/1he0uahf0';
    s1.charset = 'UTF-8';
    s1.setAttribute('crossorigin', '*');
    s0.parentNode.insertBefore(s1, s0);
    let selectedFrame = null;
    var timer = setInterval(checkSomething, 5000);

    var newX;
    var newY;
    function checkSomething() {
        // Replace this with your logic
        var iframe = document.querySelector('iframe[title="chat widget"]');
      if(iframe){
        selectedFrame = iframe;
        // makeDraggable(iframe);
        clearInterval(timer);
        // iframe.style.cssText = iframe.style.cssText.replace(/!important/g, '');
        // iframe.style.cssText += 'top: 40px !important;';
        // iframe.style.left = '30 !important';
        // iframe.style.top = '40';
        // alert( iframe.style.top);
      }
        console.log("iframe", iframe);
      }


    // document.addEventListener("DOMContentLoaded", function () {
    //     var tawkIcon = document.getElementById('tawk-chat-widget');


    //   });

      function makeDraggable(iframe) {
        iframe.addEventListener('mousedown', startDrag);
        iframe.addEventListener('touchstart', startDrag);

        iframe.contentDocument.addEventListener('mousedown', function (e) {
          e.preventDefault();
          startDrag(e)
        });

        iframe.contentDocument.addEventListener('touchstart', function (e) {
          e.preventDefault();
          startDrag(e);
        });

        function startDrag(e) {
          e.preventDefault();

          // Set the initial mouse coordinates
          var offsetX = iframe.getBoundingClientRect().left;
          var offsetY = iframe.getBoundingClientRect().top;
          console.log(offsetX, offsetY);
          // Add mousemove and mouseup event listeners for dragging
          document.addEventListener('mousemove', drag);
          document.addEventListener('touchmove', drag);

          document.addEventListener('mouseup', stopDrag);
          document.addEventListener('touchend', stopDrag);

          // Function to handle the dragging
          function drag(e) {
            e.preventDefault();

            // Calculate the new position based on the mouse coordinates
            var x = e.clientX - offsetX;
            var y = e.clientY - offsetY;

            newX = e.clientX;
            newY =  e.clientY ;

            iframe.style.cssText += 'top: '+newY+'px !important;';
            iframe.style.cssText += 'left: '+newX+'px !important;';

            console.log(e.clientX, e.clientY);
            console.log(x, y);
            // // Set the new positi on
            // // iframe.style.left = '30px !important';
            // // iframe.style.top = '40px !important';
            // console.log("og", iframe.style.cssText);
            // iframe.style.cssText += 'top: '+e.clientX+' !important;';
            // var newTopValue = e.clientX; // Change this to your desired new value
            // // var newCssText = iframe.style.cssText.replace(/top:\s*([^;]+);/i, 'top: ' + newTopValue + ';');
            // // console.log(newCssText);
            // // Set the new cssText  
            // iframe.style.cssText = newCssText;
          }

          // Function to stop dragging
          function stopDrag() {
            // Remove the mousemove and mouseup event listeners
            iframe.style.cssText += 'top: '+newY+'px !important;';
            iframe.style.cssText += 'left: '+newX+'px !important;';
            document.removeEventListener('mousemove', drag);
            document.removeEventListener('touchmove', drag);
            document.removeEventListener('mouseup', stopDrag);
            document.removeEventListener('touchend', stopDrag);
          }
        }
      }

    </script>
</html>
